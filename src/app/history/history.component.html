<div class="history-container">
  <h2>Histórico de Cálculos</h2>

  <div *ngIf="historicoPage$ | async as pageData; else loading">
    
    <div *ngIf="pageData.content && pageData.content.length > 0; else noHistory">
      <table>
        <thead>
          <tr>
            <th>Data do Cálculo</th>
            <th>Tipo de Rescisão</th>
            <th>Salário Base</th>
            <th>Data de Desligamento</th>
            <th>Valor Líquido</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of pageData.content">
            <td>{{ item.criadoEm | date:'dd/MM/yyyy HH:mm' }}</td>
            <td>{{ item.tipoRescisao | titlecase }}</td>
            <td>{{ item.salarioMensal | currency:'BRL' }}</td>
            <td>{{ item.dataDesligamento | date:'dd/MM/yyyy' }}</td>
            <td class="valor-liquido">{{ item.totalLiquido | currency:'BRL' }}</td>
          </tr>
        </tbody>
      </table>

      <div class="pagination-controls">
        <button (click)="previousPage()" [disabled]="pageData.first">Anterior</button>
        <span>Página {{ pageData.number + 1 }} de {{ pageData.totalPages }}</span>
        <button (click)="nextPage()" [disabled]="pageData.last">Próxima</button>
      </div>

    </div>

    <ng-template #noHistory>
      <p class="empty-message">Nenhum cálculo encontrado no seu histórico.</p>
    </ng-template>

  </div>

  <ng-template #loading>
    <p>Carregando histórico...</p>
  </ng-template>
</div>