<div class="calculadora-container">
  <h2>Calcular Rescisão</h2>
  <form (ngSubmit)="calcular()">
    <div class="form-group">
      <label for="tipoRescisao">Tipo de Rescisão:</label>
      <select id="tipoRescisao" [(ngModel)]="calculoRequest.tipoRescisao" name="tipoRescisao">
        <option value="SEM_JUSTA_CAUSA">Sem Justa Causa</option>
        <option value="JUSTA_CAUSA">Justa Causa</option>
        <option value="PEDIDO_DEMISSAO">Pedido de Demissão</option>
        <option value="ACORDO_484A">Acordo Art. 484-A</option>
        <option value="TERMO_CONTRATO">Término de Contrato</option>
      </select>
    </div>
    <div class="form-group">
      <label for="salarioMensal">Salário Mensal:</label>
      <input type="number" id="salarioMensal" [(ngModel)]="calculoRequest.salarioMensal" name="salarioMensal" required>
    </div>
    <div class="form-group">
      <label for="dataAdmissao">Data de Admissão:</label>
      <input type="date" id="dataAdmissao" [(ngModel)]="calculoRequest.dataAdmissao" name="dataAdmissao" required>
    </div>
    <div class="form-group">
      <label for="dataDesligamento">Data de Desligamento:</label>
      <input type="date" id="dataDesligamento" [(ngModel)]="calculoRequest.dataDesligamento" name="dataDesligamento" required>
    </div>
    <div class="form-group">
      <label for="avisoIndenizado">Aviso Indenizado:</label>
      <input type="checkbox" id="avisoIndenizado" [(ngModel)]="calculoRequest.avisoIndenizado" name="avisoIndenizado">
    </div>
    <div class="form-group">
      <label for="feriasVencidasDias">Férias Vencidas (dias):</label>
      <input type="number" id="feriasVencidasDias" [(ngModel)]="calculoRequest.feriasVencidasDias" name="feriasVencidasDias">
    </div>
    <div class="form-group">
      <label for="saldoFgtsDepositado">Saldo FGTS:</label>
      <input type="number" id="saldoFgtsDepositado" [(ngModel)]="calculoRequest.saldoFgtsDepositado" name="saldoFgtsDepositado">
    </div>

    <div class="form-group">
      <label for="numeroDependentes">Número de Dependentes (para IRRF):</label>
      <input type="number" id="numeroDependentes" [(ngModel)]="calculoRequest.numeroDependentes" name="numeroDependentes" min="0">
    </div>

    <button type="submit">Calcular</button>
  </form>

  <div *ngIf="resultado" class="resultado-container">
    <h3>Resultado do Cálculo</h3>
    
    <h4>Proventos (Verbas Brutas)</h4>
    <ul>
      <li *ngFor="let comp of resultado.componentes">
        {{ comp.nome }}: {{ comp.valor | currency:'BRL' }}
      </li>
    </ul>
    <p class="total-bruto">Total Bruto: {{ resultado.totalBruto | currency:'BRL' }}</p>

    <div *ngIf="resultado.descontos && resultado.descontos.length > 0">
      <h4>Descontos</h4>
      <ul>
        <li *ngFor="let desc of resultado.descontos">
          {{ desc.nome }}: {{ desc.valor | currency:'BRL' }}
        </li>
      </ul>
      <p class="total-descontos">Total Descontos: {{ resultado.totalDescontos | currency:'BRL' }}</p>
    </div>
    
    <p class="total-liquido">Total Líquido a Receber: {{ resultado.totalLiquido | currency:'BRL' }}</p>
    <p>Pagamento até: {{ resultado.pagamentoAte | date:'dd/MM/yyyy' }}</p>

  </div>

  <div *ngIf="historico.length > 0" class="historico-container">
    <h3>Histórico de Cálculos</h3>
    <table>
      <thead>
        <tr>
          <th>Data</th>
          <th>Salário</th>
          <th>Admissão</th>
          <th>Desligamento</th>
          <th>Total Bruto</th>
          <th>Total Líquido</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of historico">
          <td>{{ item.criadoEm | date:'short' }}</td>
          <td>{{ item.salarioMensal | currency:'BRL' }}</td>
          <td>{{ item.dataAdmissao | date:'dd/MM/yyyy' }}</td>
          <td>{{ item.dataDesligamento | date:'dd/MM/yyyy' }}</td>
          <td>{{ item.totalBruto | currency:'BRL' }}</td>
          <td>{{ item.totalLiquido | currency:'BRL' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>